import{d as e,ah as n,o as a,c as t,e as l,H as r,aQ as u,aD as s,Q as o,m as i,r as d,R as c,J as p,aB as m,q as b,B as v,aR as N,_ as f,ax as h,s as g,az as w,aA as I,n as V,aq as y,g as x,w as S,v as A,X as D,ar as B,a0 as k}from"./index.a0a0051f.js";import{E}from"./el-input.d916f5dc.js";import{o as F,e as z}from"./el-popper.878cdaf8.js";import{u as M}from"./index.d5d0ce9e.js";import{u as R,c as j}from"./index.c676e701.js";import{a as C}from"./arrow-up.85bda5d4.js";import{a as _}from"./arrow-down.2e6064ce.js";const P=e({name:"Minus"}),H={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},K=[l("path",{fill:"currentColor",d:"M128 544h768a32 32 0 1 0 0-64H128a32 32 0 0 0 0 64z"},null,-1)];var T=n(P,[["render",function(e,n,l,r,u,s){return a(),t("svg",H,K)}]]);const q=e({name:"Plus"}),O={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Q=[l("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64h352z"},null,-1)];var Y={beforeMount(e,n){let a,t=null;const l=()=>n.value&&n.value(),r=()=>{Date.now()-a<100&&l(),clearInterval(t),t=null};F(e,"mousedown",(e=>{0===e.button&&(a=Date.now(),z(document,"mouseup",r),clearInterval(t),t=setInterval(l,100))}))}};const G=k(f(e({name:"ElInputNumber",components:{ElInput:E,ElIcon:o,ArrowUp:C,ArrowDown:_,Plus:n(q,[["render",function(e,n,l,r,u,s){return a(),t("svg",O,Q)}]]),Minus:T},directives:{RepeatClick:Y},props:r({step:{type:Number,default:1},stepStrictly:{type:Boolean,default:!1},max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:{type:Number},disabled:{type:Boolean,default:!1},size:{type:String,values:u},controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},name:String,label:String,placeholder:String,precision:{type:Number,validator:e=>e>=0&&e===Number.parseInt(`${e}`,10)}}),emits:{change:(e,n)=>e!==n,blur:e=>e instanceof FocusEvent,focus:e=>e instanceof FocusEvent,input:e=>s(e),"update:modelValue":e=>s(e)||void 0===e},setup(e,{emit:n}){const a=i(),t=d({currentValue:e.modelValue,userInput:null}),{formItem:l}=M(),r=c("input-number"),u=p((()=>S(e.modelValue,-1)<e.min)),o=p((()=>S(e.modelValue)>e.max)),f=p((()=>{const n=x(e.step);return m(e.precision)?Math.max(x(e.modelValue),n):(e.precision,e.precision)})),g=p((()=>e.controls&&"right"===e.controlsPosition)),w=R(),I=j(),V=p((()=>{if(null!==t.userInput)return t.userInput;let n=t.currentValue;if(s(n)){if(Number.isNaN(n))return"";m(e.precision)||(n=n.toFixed(e.precision))}return n})),y=(e,n)=>(m(n)&&(n=f.value),Number.parseFloat(""+Math.round(e*10**n)/10**n)),x=e=>{if(m(e))return 0;const n=e.toString(),a=n.indexOf(".");let t=0;return-1!==a&&(t=n.length-a-1),t},S=(n,a=1)=>s(n)?(n=s(n)?n:Number.NaN,y(n+e.step*a)):t.currentValue,A=(a,t)=>{const{max:l,min:r,step:u,precision:s,stepStrictly:o}=e;let i=Number(a);return null===a&&(i=Number.NaN),Number.isNaN(i)||(o&&(i=Math.round(i/u)*u),m(s)||(i=y(i,s)),(i>l||i<r)&&(i=i>l?l:r,t&&n("update:modelValue",i))),i},D=e=>{var a;const r=t.currentValue;let u=A(e);r!==u&&(Number.isNaN(u)&&(u=void 0),t.userInput=null,n("update:modelValue",u),n("input",u),n("change",u,r),null==(a=null==l?void 0:l.validate)||a.call(l,"change").catch((e=>h())),t.currentValue=u)};return b((()=>e.modelValue),(e=>{const n=A(e,!0);t.currentValue=n,t.userInput=null}),{immediate:!0}),v((()=>{var l;const r=null==(l=a.value)?void 0:l.input;if(r.setAttribute("role","spinbutton"),r.setAttribute("aria-valuemax",String(e.max)),r.setAttribute("aria-valuemin",String(e.min)),r.setAttribute("aria-valuenow",String(t.currentValue)),r.setAttribute("aria-disabled",String(I.value)),!s(e.modelValue)){let a=Number(e.modelValue);Number.isNaN(a)&&(a=void 0),n("update:modelValue",a)}})),N((()=>{var e;const n=null==(e=a.value)?void 0:e.input;null==n||n.setAttribute("aria-valuenow",t.currentValue)})),{input:a,displayValue:V,handleInput:e=>t.userInput=e,handleInputChange:e=>{const n=""!==e?Number(e):"";(s(n)&&!Number.isNaN(n)||""===e)&&D(n),t.userInput=null},controlsAtRight:g,decrease:()=>{if(I.value||u.value)return;const n=e.modelValue||0,a=S(n,-1);D(a)},increase:()=>{if(I.value||o.value)return;const n=e.modelValue||0,a=S(n);D(a)},inputNumberSize:w,inputNumberDisabled:I,maxDisabled:o,minDisabled:u,focus:()=>{var e,n;null==(n=null==(e=a.value)?void 0:e.focus)||n.call(e)},blur:()=>{var e,n;null==(n=null==(e=a.value)?void 0:e.blur)||n.call(e)},handleFocus:e=>{n("focus",e)},handleBlur:e=>{var a;n("blur",e),null==(a=null==l?void 0:l.validate)||a.call(l,"blur").catch((e=>h()))},ns:r}}}),[["render",function(e,n,l,r,u,s){const o=g("arrow-down"),i=g("minus"),d=g("el-icon"),c=g("arrow-up"),p=g("plus"),m=g("el-input"),b=w("repeat-click");return a(),t("div",{class:V([e.ns.b(),e.ns.m(e.inputNumberSize),e.ns.is("disabled",e.inputNumberDisabled),e.ns.is("without-controls",!e.controls),e.ns.is("controls-right",e.controlsAtRight)]),onDragstart:n[2]||(n[2]=B((()=>{}),["prevent"]))},[e.controls?I((a(),t("span",{key:0,role:"button",class:V([e.ns.e("decrease"),e.ns.is("disabled",e.minDisabled)]),onKeydown:n[0]||(n[0]=y(((...n)=>e.decrease&&e.decrease(...n)),["enter"]))},[x(d,null,{default:S((()=>[e.controlsAtRight?(a(),A(o,{key:0})):(a(),A(i,{key:1}))])),_:1})],34)),[[b,e.decrease]]):D("v-if",!0),e.controls?I((a(),t("span",{key:1,role:"button",class:V([e.ns.e("increase"),e.ns.is("disabled",e.maxDisabled)]),onKeydown:n[1]||(n[1]=y(((...n)=>e.increase&&e.increase(...n)),["enter"]))},[x(d,null,{default:S((()=>[e.controlsAtRight?(a(),A(c,{key:0})):(a(),A(p,{key:1}))])),_:1})],34)),[[b,e.increase]]):D("v-if",!0),x(m,{ref:"input",type:"number",step:e.step,"model-value":e.displayValue,placeholder:e.placeholder,disabled:e.inputNumberDisabled,size:e.inputNumberSize,max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onKeydown:[y(B(e.increase,["prevent"]),["up"]),y(B(e.decrease,["prevent"]),["down"])],onBlur:e.handleBlur,onFocus:e.handleFocus,onInput:e.handleInput,onChange:e.handleInputChange},null,8,["step","model-value","placeholder","disabled","size","max","min","name","label","onKeydown","onBlur","onFocus","onInput","onChange"])],34)}],["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]));export{G as E,Y as R};
